<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
<title>.eunit/event.COVER.html</title>
</head><body style='background-color: white; color: black'>
<pre>
File generated from /Users/gregor/tika_server/.eunit/event.erl by COVER 2014-12-28 at 13:57:17

****************************************************************************

        |  -module(event).
        |  -export([add_user_to_event/3, remove_user_from_event/3, 
        |  	reject_event/2,fix/2,edit/2]).
        |  -include("records.hrl").
        |  
        |  add_user_to_event(Event=#event{},User=#user{},Day_ts)-&gt;
     4..|  	Dates = Event#event.dates,
     4..|  	Fun = (fun(Day=#day{})-&gt;
     8..|  				case Day#day.timestamp of
        |  					Day_ts -&gt; 
     4..|  							Guests = Day#day.guests,
     4..|  							Day#day{guests = lists:append(Guests,[User])};
     4..|  					_ -&gt; Day
        |  				end
        |  			end),
     4..|  	Event#event{dates = lists:map(Fun,Dates)}.
        |  
        |  
        |  remove_user_from_event(Event=#event{},User=#user{},Day_ts)-&gt;
     2..|  	Dates = Event#event.dates,
     2..|  	Fun = (fun(Day=#day{})-&gt;
     4..|  				case Day#day.timestamp of
        |  					Day_ts -&gt; 
     2..|  							Guests = Day#day.guests,
     2..|  							Day#day{guests = lists:delete(User,Guests)};
     2..|  					_ -&gt; Day
        |  				end
        |  			end),
     2..|  	Event#event{dates = lists:map(Fun,Dates)}.
        |  
        |  reject_event(Event=#event{},User=#user{}) -&gt; 
     3..|  	Contacts=Event#event.contacts,
     3..|  	Event#event{contacts = lists:delete(User,Contacts)}.
        |  
        |  fix(Event=#event{},Day=#day{}) -&gt;
     2..|  	Event#event{appointment=Day}.
        |  
        |  %edit Event properties
        |  edit(Event=#event{},{title,Title}) -&gt;
     2..|  	Event#event{title=Title};
        |  edit(Event=#event{},{description,Description}) -&gt;
     2..|  	Event#event{description=Description};
        |  edit(Event=#event{},{addContact,User=#user{}}) -&gt;
     2..|  	Contacts=Event#event.contacts,
     2..|  	Event#event{contacts = lists:append(Contacts,[User])};
        |  edit(Event=#event{},{removeContact,User=#user{}}) -&gt;
     2..|  	Contacts=Event#event.contacts,
     2..|  	Event#event{contacts = lists:delete(User,Contacts)};
        |  edit(Event=#event{},{addDate,Day=#day{}}) -&gt;
     2..|  	Dates=Event#event.dates,
     2..|  	Event#event{dates = lists:append(Dates,[Day])};
        |  edit(Event=#event{},{removeDate,Day=#day{}}) -&gt;
     2..|  	Dates=Event#event.dates,
     2..|  	Event#event{dates = lists:delete(Day,Dates)}.
        |  
        |  	
        |  
</pre>
</body>
</html>
